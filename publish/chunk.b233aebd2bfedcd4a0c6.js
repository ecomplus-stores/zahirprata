(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{245:function(e,t,o){"use strict";o.d(t,"a",(function(){return s})),o.d(t,"b",(function(){return a}));var c=o(25),n=o(20),r=o(34);const s=c.$ecomConfig.get("currency")||"BRL",a=e=>{const t={name:Object(n.a)(e),id:e.sku,price:Object(r.a)(e).toFixed(2)};return e.quantity&&(t.quantity=e.quantity),t}},259:function(e,t,o){"use strict";o(4);var c=o(8),n=o(245);t.a=e=>{const t=window.storefrontApp&&window.storefrontApp.router;if(t){let o,r,s;const a=()=>{const e=[];return c.a.data&&Array.isArray(c.a.data.items)&&c.a.data.items.forEach((t=>{e.push(Object(n.b)(t))})),e},i=t=>{e.push({ecommerce:null}),e.push({event:"eec.checkout_option",ecommerce:{currencyCode:n.a,checkout_option:{actionField:t}}})},u=(t,c)=>{const s={step:t,option:c};1===t&&o||2===t&&r||(e.push({ecommerce:null}),e.push({event:"eec.checkout",ecommerce:{currencyCode:n.a,checkout:{actionField:s,products:a()}}}),e.push({event:"checkout"}),1===t?o=!0:r=!0)},d=(t,o)=>{if(!s){if(window.localStorage.getItem("gtm.orderIdSent")!==t){let r;if(o)try{r=JSON.parse(o)}catch(e){}const{amount:s}=r||window.storefrontApp,u={id:t,revenue:(s&&s.total||c.a.data&&c.a.data.subtotal||0).toFixed(2)};s&&(void 0!==s.freight&&(u.shipping=s.freight.toFixed(2)),void 0!==s.tax&&(u.tax=s.tax.toFixed(2))),r&&(["shipping_method_label","payment_method_label"].forEach(((e,t)=>{r[e]&&i({step:3+t,option:r[e]})})),r.extra_discount&&r.extra_discount.discount_coupon&&(u.coupon=r.extra_discount.discount_coupon)),e.push({ecommerce:null}),e.push({event:"eec.purchase",ecommerce:{currencyCode:n.a,purchase:{actionField:u,products:a()}}}),window.localStorage.setItem("gtm.orderIdSent",t)}s=!0}};let l;const m=e=>{let{name:t,params:o}=e;switch(t){case"cart":u(1,"Review Cart");break;case"checkout":o.step&&r||u(2,"Login / Signup"),1===Number(o.step)?u(3,"Shipping Method"):2===Number(o.step)&&u(4,"Payment Method");break;case"confirmation":clearTimeout(l),o.json?d(o.id,decodeURIComponent(o.json)):l=setTimeout((()=>{d(o.id)}),1500)}};t.currentRoute&&m(t.currentRoute),t.afterEach(m)}}},260:function(e,t,o){"use strict";o(4);var c=o(8),n=o(245);t.a=e=>{const t={};setTimeout((()=>{c.a.data.items.forEach((e=>{t[e.sku]=Object(n.b)(e)}))}),10);const o=o=>{const c=Object(n.b)(o);e.push({ecommerce:null}),e.push({event:"eec.add",ecommerce:{currencyCode:n.a,add:{products:[c]}}}),e.push({event:"addToCart"}),t[o.sku]=c},r=o=>{const c=t[o.sku];e.push({ecommerce:null}),e.push({event:"eec.remove",ecommerce:{currencyCode:n.a,remove:{products:[c?Object.assign({},c):Object(n.b)(o)]}}}),e.push({event:"removeFromCart"}),delete t[o.sku]};c.a.on("addItem",(e=>{let{item:t}=e;return o(t)})),c.a.on("increaseItemQnt",(e=>{let{item:c}=e;const n=t[c.sku];if(n){const e=c.quantity-n.quantity;e>0?o({...c,quantity:e}):r({...c,quantity:-e})}else o(c)})),c.a.on("removeItem",(e=>{let{item:t}=e;return r(t)})),c.a.on("clear",(()=>{for(const e in t)t[e]&&r(t[e])}))}},388:function(e,t,o){"use strict";o.r(t);o(4);var c=o(84),n=o(245),r=e=>{const t=window.storefront&&window.storefront.context;if(t&&"products"===t.resource){const{body:o}=t,r=Object(n.b)(o),s={event:"eec.detail",ecommerce:{currencyCode:n.a,detail:{products:[r]}}},a=Object(c.a)(o);a.length&&(r.category=o.category_tree?o.category_tree.replace(/\s>\s/g,"/"):a[0],s.ecommerce.detail.actionField={list:a[0]}),o.brands&&o.brands.length&&(r.brand=o.brands[0].name),e.push({ecommerce:null}),e.push(s)}},s=e=>{const t=document.querySelectorAll("[data-sku]");if(t.length){const o=[],c={},r="/search"===window.location.pathname;let s;if(r)s="Search results";else{const e=window.storefront&&window.storefront.context;if(e&&e.body){const{name:t}=e.body;switch(e.resource){case"categories":s=`Category: ${t}`;break;case"brands":s=`Brand: ${t}`;break;case"collections":s=`Collection: ${t}`}}else s="Home"}for(let n=0;n<t.length;n++){const s=t[n],{sku:a}=s.dataset;if(-1===o.indexOf(a)&&(o.push(a),s.closest)){const e=s.closest(".products-carousel");!r&&e&&(c[a]=e.dataset.title)}const u=s.querySelector("a");if(u){const t=function(){u.removeEventListener("click",o,!1),u.click()},o=function(o){o.preventDefault();const c=i.find((e=>{let{id:t}=e;return t===a}));e.push({ecommerce:null}),e.push({event:"eec.click",ecommerce:{click:{actionField:{list:c.list||""},products:[c]}},eventCallback:t}),setTimeout(t,1e3)};u.addEventListener("click",o,!1)}}const a={},i=o.map((e=>{const t=c[e]||s,o={id:e};return t&&(o.list=t,a[t]?a[t]++:a[t]=1,o.position=a[t]),o}));e.push({ecommerce:null}),e.push({event:"eec.impressions",ecommerce:{currencyCode:n.a,impressions:i}})}},a=o(259),i=o(260);t.default=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{dataLayerVar:t,parseDomMsDelay:o}=e,c=window[t]||window.dataLayer;c&&(r(c),Object(a.a)(c),Object(i.a)(c),setTimeout((()=>{s(c)}),o>=0?o:300))}}}]);